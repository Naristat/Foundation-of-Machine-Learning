<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lecture 5 — Definite Matrices (Positive Definite & Semidefinite)</title>
  <style>
    :root{
      --bg:#f6f8fb; --card:#fff; --accent:#0b6cf0; --muted:#2f4150;
    }
    body{
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background:var(--bg); color:var(--muted); margin:0; padding:28px;
    }
    .wrap{max-width:980px;margin:0 auto}
    header{display:flex;align-items:center;gap:16px}
    h1{margin:0;color:#0f1724;font-size:1.6rem}
    .meta{color:#64748b;font-size:0.95rem}
    .card{background:var(--card);border-radius:12px;padding:20px;margin-top:18px;box-shadow:0 8px 30px rgba(2,6,23,0.04)}
    h2{color:#0f1724}
    p{line-height:1.55}
    pre{background:#f1f5f9;padding:12px;border-radius:8px;overflow:auto}
    .cols{display:grid;grid-template-columns:1fr 340px;gap:18px}
    table{width:100%;border-collapse:collapse;margin-top:8px}
    th,td{padding:8px;border-bottom:1px dashed #eef2ff;text-align:left}
    label{display:block;margin-top:8px;font-weight:600}
    input[type=text]{width:100%;padding:8px;border-radius:8px;border:1px solid #e6eef8}
    button{margin-top:10px;padding:10px 14px;border-radius:10px;border:none;background:var(--accent);color:#fff;cursor:pointer}
    .note{font-size:0.95rem;color:#475569}
    .result{background:#f8fafc;padding:12px;border-radius:8px;margin-top:10px}
    code{background:#eef4ff;padding:2px 6px;border-radius:6px}
  </style>
  <!-- MathJax for LaTeX rendering -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Lecture 5 — Definite Matrices</h1>
        <div class="meta">Positive definite, positive semidefinite, properties, tests, examples & ML applications</div>
      </div>
    </header>

    <section class="card">
      <h2>1. Definitions</h2>
      <p>
        Let \(A\) be a real symmetric \(n \times n\) matrix (symmetry is important for the usual definiteness notions).
      </p>
      <ul>
        <li><b>Positive definite (PD):</b> \(A\) is PD if for all non-zero vectors \(x\in\mathbb{R}^n\), \(x^\top A x > 0.\)</li>
        <li><b>Positive semidefinite (PSD):</b> \(A\) is PSD if for all \(x\), \(x^\top A x \ge 0.\)</li>
        <li><b>Negative definite / semidefinite:</b> defined similarly with \(x^\top A x < 0\) or \(\le 0\).</li>
        <li><b>Indefinite:</b> exists \(x,y\) such that \(x^\top A x > 0\) and \(y^\top A y < 0.\)</li>
      </ul>

      <h2>2. Key properties (symmetric matrices)</h2>
      <ul>
        <li>All eigenvalues of a symmetric matrix are real.</li>
        <li>\(A\) is PD \(\iff\) all eigenvalues of \(A\) are positive.</li>
        <li>\(A\) is PSD \(\iff\) all eigenvalues are non-negative.</li>
        <li><b>Sylvester's criterion:</b> \(A\) is PD \(\iff\) all leading principal minors (determinants of top-left \(k\times k\) blocks) are positive.</li>
        <li>If \(A\) is PD, there exists a unique Cholesky decomposition \(A = L L^\top\) with lower-triangular \(L\) and positive diagonal.</li>
      </ul>

      <h2>3. Quick tests you can use</h2>
      <ol>
        <li><b>Eigenvalue test:</b> compute eigenvalues and check signs. This is the most direct and reliable test.</li>
        <li><b>Sylvester's criterion:</b> check leading principal minors (fast for small matrices).</li>
        <li><b>Cholesky factorization:</b> try to compute it; if it succeeds (no negative square root), matrix is PD.</li>
      </ol>

      <h2>4. Worked examples</h2>

      <h3>Example A (2×2 positive definite)</h3>
      <pre>
\[
A = \begin{bmatrix} 2 & -1 \\ -1 & 2 \end{bmatrix}, \quad
x = \begin{bmatrix} x_1 \\ x_2 \end{bmatrix}
\]

\[
x^\top A x = 2x_1^2 - 2x_1x_2 + 2x_2^2 = 2(x_1^2 - x_1x_2 + x_2^2) > 0 \quad (x \neq 0)
\]

Eigenvalues: \(\lambda_1 = 1,\;\lambda_2 = 3\) → \(A\) is PD
      </pre>

      <h3>Example B (PSD but not PD)</h3>
      <pre>
\[
A = \begin{bmatrix} 1 & 1 \\ 1 & 1 \end{bmatrix}
\]

Eigenvalues: \(\lambda_1 = 0,\;\lambda_2 = 2\) → PSD (but not PD, since one eigenvalue is 0)
      </pre>

      <h3>Example C (Indefinite)</h3>
      <pre>
\[
A = \begin{bmatrix} 1 & 2 \\ 2 & -1 \end{bmatrix}
\]

Eigenvalues: \(\lambda_1 \approx 2.236,\;\lambda_2 \approx -2.236\) → indefinite
      </pre>

      <h2>5. Applications in Machine Learning</h2>
      <ul>
        <li><b>Covariance matrices:</b> Covariance matrix \(\Sigma\) is PSD (and PD if variables not collinear). PSD property ensures variances are non-negative and allows PCA.</li>
        <li><b>Kernel matrices:</b> For a valid kernel \(k(\cdot,\cdot)\), Gram matrix \(K_{ij}=k(x_i,x_j)\) is PSD. Kernel methods rely on this property.</li>
        <li><b>Optimization:</b> If Hessian is PD at a point, it’s a strict local minimum. Helps analyze convexity.</li>
        <li><b>Regularization:</b> Adding \(\lambda I\) (\(\lambda>0\)) ensures PD and stabilizes matrix inversion.</li>
      </ul>

      <hr>

      <h2>6. Interactive checker</h2>
      <div class="cols">
        <div>
          <p class="note">Enter a square matrix (rows with semicolons, entries with spaces). Example: <code>2 -1; -1 2</code></p>
          <label>Matrix A</label>
          <input id="matInput" type="text" value="2 -1; -1 2">
          <button onclick="analyze()">Analyze matrix</button>
          <button onclick="loadExample('PD')">Load PD</button>
          <button onclick="loadExample('PSD')">Load PSD</button>
          <button onclick="loadExample('IND')">Load Indefinite</button>

          <div id="analysis" class="result"></div>
        </div>

        <aside class="card">
          <h3 style="margin-top:0">Quick reference</h3>
          <table>
            <tr><th>Test</th><th>When to use</th></tr>
            <tr><td>Eigenvalues</td><td>Direct, reliable</td></tr>
            <tr><td>Sylvester</td><td>Small matrices</td></tr>
            <tr><td>Cholesky</td><td>Practical test for PD</td></tr>
          </table>
        </aside>
      </div>

      <script>
        function parseMatrix(s){
          let rows = s.split(';').map(r=>r.trim()).filter(r=>r.length>0);
          let M = rows.map(r=>r.split(/\s+/).map(Number));
          let n=M.length;
          if(!M.every(r=>r.length===n)) return null;
          return M;
        }
        function isSymmetric(A,tol=1e-8){
          let n=A.length;
          for(let i=0;i<n;i++)for(let j=0;j<n;j++)
            if(Math.abs(A[i][j]-A[j][i])>tol) return false;
          return true;
        }
        function det(M){
          let n=M.length;
          if(n===1) return M[0][0];
          if(n===2) return M[0][0]*M[1][1]-M[0][1]*M[1][0];
          let s=0;
          for(let j=0;j<n;j++){
            let minor=M.slice(1).map(r=>r.filter((_,k)=>k!==j));
            s+=((j%2? -1:1)*M[0][j]*det(minor));
          }
          return s;
        }
        function cholesky(A){
          let n=A.length,L=Array.from({length:n},()=>Array(n).fill(0));
          for(let i=0;i<n;i++){
            for(let j=0;j<=i;j++){
              let s=0; for(let k=0;k<j;k++) s+=L[i][k]*L[j][k];
              if(i===j){
                let val=A[i][i]-s; if(val<=0) return null;
                L[i][j]=Math.sqrt(val);
              } else L[i][j]=(A[i][j]-s)/L[j][j];
            }
          }
          return L;
        }
        function jacobiEigen(A,tol=1e-10,maxIter=100){
          let n=A.length,B=A.map(r=>r.slice());
          for(let iter=0;iter<maxIter;iter++){
            let p=0,q=1,maxv=0;
            for(let i=0;i<n;i++)for(let j=i+1;j<n;j++)
              if(Math.abs(B[i][j])>maxv){maxv=Math.abs(B[i][j]);p=i;q=j;}
            if(maxv<tol) break;
            let phi=0.5*Math.atan2(2*B[p][q],B[q][q]-B[p][p]);
            let c=Math.cos(phi),s=Math.sin(phi);
            let Bpp=c*c*B[p][p]-2*s*c*B[p][q]+s*s*B[q][q];
            let Bqq=s*s*B[p][p]+2*s*c*B[p][q]+c*c*B[q][q];
            B[p][p]=Bpp; B[q][q]=Bqq; B[p][q]=B[q][p]=0;
            for(let r=0;r<n;r++)if(r!==p&&r!==q){
              let Brp=c*B[r][p]-s*B[r][q];
              let Brq=s*B[r][p]+c*B[r][q];
              B[r][p]=B[p][r]=Brp; B[r][q]=B[q][r]=Brq;
            }
          }
          return {eigvals:B.map((_,i)=>B[i][i])};
        }
        function toLatexMatrix(M){
          return '\\\\begin{bmatrix}'+M.map(r=>r.join('&')).join('\\\\')+'\\\\end{bmatrix}';
        }
        function analyze(){
          let A=parseMatrix(document.getElementById('matInput').value);
          const out=document.getElementById('analysis');
          if(!A){out.innerHTML='<b style="color:red">Invalid input</b>';return;}
          let n=A.length;
          let html=`Matrix: \\(${toLatexMatrix(A)}\\)<br>`;
          let sym=isSymmetric(A);
          html+=`Symmetric: ${sym}<br>`;
          let res=jacobiEigen(A);
          let eigs=res.eigvals.map(v=>Math.round(v*1e6)/1e6);
          html+=`Eigenvalues: \\([${eigs.join(', ')}]\\)<br>`;
          let pos=eigs.filter(v=>v>1e-9).length;
          let zero=eigs.filter(v=>Math.abs(v)<=1e-9).length;
          let neg=eigs.filter(v=>v<-1e-9).length;
          let cls='';
          if(neg===0&&zero===0) cls='PD';
          else if(neg===0) cls='PSD';
          else if(pos===0&&zero===0) cls='ND';
          else if(pos===0) cls='NSD';
          else cls='Indefinite';
          html+=`Classification: <b>${cls}</b><br>`;
          if(n<=4){
            let minors=[];for(let k=1;k<=n;k++){
              let M=A.slice(0,k).map(r=>r.slice(0,k));
              minors.push(Math.round(det(M)*1e6)/1e6);
            }
            html+=`Leading minors: \\([${minors.join(', ')}]\\)<br>`;
          }
          let L=cholesky(A);
          if(L) html+=`Cholesky L: \\(${toLatexMatrix(L)}\\)<br>`;
          else html+=`Cholesky failed<br>`;
          out.innerHTML=html;
          MathJax.typesetPromise();
        }
        function loadExample(t){
          if(t==='PD')matInput.value='2 -1; -1 2';
          if(t==='PSD')matInput.value='1 1; 1 1';
          if(t==='IND')matInput.value='1 2; 2 -1';
          analyze();
        }
      </script>

      <footer class="note" style="margin-top:12px">
        Summary: Eigenvalues >0 → PD; ≥0 → PSD. Sylvester & Cholesky give practical alternatives.
      </footer>
    </section>
  </div>
</body>
</html>
